/* automatically generated by JSCoverage - do not edit */
if (typeof _$jscoverage === 'undefined') _$jscoverage = {};
if (! _$jscoverage['handler/business.js']) {
  _$jscoverage['handler/business.js'] = [];
  _$jscoverage['handler/business.js'][1] = 0;
  _$jscoverage['handler/business.js'][5] = 0;
  _$jscoverage['handler/business.js'][6] = 0;
  _$jscoverage['handler/business.js'][19] = 0;
  _$jscoverage['handler/business.js'][20] = 0;
  _$jscoverage['handler/business.js'][23] = 0;
  _$jscoverage['handler/business.js'][24] = 0;
  _$jscoverage['handler/business.js'][28] = 0;
  _$jscoverage['handler/business.js'][29] = 0;
  _$jscoverage['handler/business.js'][30] = 0;
  _$jscoverage['handler/business.js'][31] = 0;
  _$jscoverage['handler/business.js'][35] = 0;
  _$jscoverage['handler/business.js'][36] = 0;
  _$jscoverage['handler/business.js'][40] = 0;
  _$jscoverage['handler/business.js'][41] = 0;
  _$jscoverage['handler/business.js'][42] = 0;
  _$jscoverage['handler/business.js'][43] = 0;
  _$jscoverage['handler/business.js'][45] = 0;
  _$jscoverage['handler/business.js'][50] = 0;
  _$jscoverage['handler/business.js'][51] = 0;
  _$jscoverage['handler/business.js'][52] = 0;
  _$jscoverage['handler/business.js'][53] = 0;
  _$jscoverage['handler/business.js'][56] = 0;
  _$jscoverage['handler/business.js'][57] = 0;
  _$jscoverage['handler/business.js'][61] = 0;
  _$jscoverage['handler/business.js'][62] = 0;
  _$jscoverage['handler/business.js'][63] = 0;
  _$jscoverage['handler/business.js'][64] = 0;
  _$jscoverage['handler/business.js'][65] = 0;
  _$jscoverage['handler/business.js'][69] = 0;
  _$jscoverage['handler/business.js'][70] = 0;
  _$jscoverage['handler/business.js'][74] = 0;
  _$jscoverage['handler/business.js'][75] = 0;
  _$jscoverage['handler/business.js'][76] = 0;
  _$jscoverage['handler/business.js'][77] = 0;
  _$jscoverage['handler/business.js'][79] = 0;
  _$jscoverage['handler/business.js'][80] = 0;
  _$jscoverage['handler/business.js'][82] = 0;
  _$jscoverage['handler/business.js'][85] = 0;
  _$jscoverage['handler/business.js'][89] = 0;
}
_$jscoverage['handler/business.js'][1]++;
var noevil = require("see-no-evil"), restify = require("restify"), util = require("../util");
_$jscoverage['handler/business.js'][5]++;
module.exports = (function (db) {
  _$jscoverage['handler/business.js'][6]++;
  var common = require("./common"), handler = {};
  _$jscoverage['handler/business.js'][19]++;
  function augmentMeeting(meet) {
    _$jscoverage['handler/business.js'][20]++;
    meet.interventionsPath = "/meetings/" + meet.id + "/interventions";
}
  _$jscoverage['handler/business.js'][23]++;
  handler.getMeetings = (function (req, res, next) {
  _$jscoverage['handler/business.js'][24]++;
  var wrap = noevil({error: next});
  _$jscoverage['handler/business.js'][28]++;
  db.meetings.getAll(req.query, wrap((function (nul, meets) {
  _$jscoverage['handler/business.js'][29]++;
  meets.forEach(augmentMeeting);
  _$jscoverage['handler/business.js'][30]++;
  res.send(meets);
  _$jscoverage['handler/business.js'][31]++;
  return next();
})));
});
  _$jscoverage['handler/business.js'][35]++;
  handler.loadMeeting = (function (req, res, next) {
  _$jscoverage['handler/business.js'][36]++;
  var wrap = noevil({error: next});
  _$jscoverage['handler/business.js'][40]++;
  db.meetings.get(req.params.idMeeting, wrap((function (nul, meet) {
  _$jscoverage['handler/business.js'][41]++;
  if (meet) {
    _$jscoverage['handler/business.js'][42]++;
    req.params.meet = meet;
    _$jscoverage['handler/business.js'][43]++;
    return next();
  }
  else {
    _$jscoverage['handler/business.js'][45]++;
    res.send(new restify.ResourceNotFoundError("L'identifiant de s\u00c3\u00a9ance demand\u00c3\u00a9 n'existe pas."));
  }
})));
});
  _$jscoverage['handler/business.js'][50]++;
  handler.getMeeting = (function (req, res, next) {
  _$jscoverage['handler/business.js'][51]++;
  augmentMeeting(req.params.meet);
  _$jscoverage['handler/business.js'][52]++;
  res.send(req.params.meet);
  _$jscoverage['handler/business.js'][53]++;
  return next();
});
  _$jscoverage['handler/business.js'][56]++;
  handler.getMeetingInterventions = (function (req, res, next) {
  _$jscoverage['handler/business.js'][57]++;
  var wrap = noevil({error: next});
  _$jscoverage['handler/business.js'][61]++;
  util.extend(req.query, {meeting: req.params.idMeeting});
  _$jscoverage['handler/business.js'][62]++;
  db.interventions.getAll(req.query, wrap((function (nul, ints) {
  _$jscoverage['handler/business.js'][63]++;
  ints.forEach(common.augmentIntervention);
  _$jscoverage['handler/business.js'][64]++;
  res.send(ints);
  _$jscoverage['handler/business.js'][65]++;
  return next();
})));
});
  _$jscoverage['handler/business.js'][69]++;
  handler.getMeetingIntervention = (function (req, res, next) {
  _$jscoverage['handler/business.js'][70]++;
  var wrap = noevil({error: next});
  _$jscoverage['handler/business.js'][74]++;
  db.interventions.get(req.params.idInt, wrap((function (nul, intr) {
  _$jscoverage['handler/business.js'][75]++;
  if (intr && intr.meetingId === req.params.idMeeting) {
    _$jscoverage['handler/business.js'][76]++;
    common.augmentIntervention(intr);
    _$jscoverage['handler/business.js'][77]++;
    res.send(intr);
  }
  else {
    _$jscoverage['handler/business.js'][79]++;
    if (intr) {
      _$jscoverage['handler/business.js'][80]++;
      res.send(new restify.ResourceNotFoundError("L'identifiant d'intervention demand\u00c3\u00a9 n'existe pas pour la s\u00c3\u00a9ance sp\u00c3\u00a9cifi\u00c3\u00a9e."));
    }
    else {
      _$jscoverage['handler/business.js'][82]++;
      res.send(new restify.ResourceNotFoundError("L'identifiant d'intervention demand\u00c3\u00a9 n'existe pas."));
    }
  }
  _$jscoverage['handler/business.js'][85]++;
  return next();
})));
});
  _$jscoverage['handler/business.js'][89]++;
  return handler;
});
_$jscoverage['handler/business.js'].source = ["var noevil = require('see-no-evil'),","  restify = require('restify'),","  util = require('../util')","","module.exports = function(db) {","  var common = require('./common'),","    handler = {}","","  /*","  ** Meeting object:","  ** - status : the status of the parliament business day (\"Pr&#195;&#169;liminaire\", \"Finale\" is definitive)","  ** - session : the parliament session (LL.SS : l&#195;&#169;gislative.session)","  ** - day : the day of the week of the business, in French","  ** - date : the date of the business","  ** - id : the ID of the business, in Vol.No format","  ** - interventionsPath : the path to the interventions of this business day","  */","","  function augmentMeeting(meet) {","    meet.interventionsPath = '/meetings/' + meet.id + '/interventions'","  }","","  handler.getMeetings = function(req, res, next) {","    var wrap = noevil({","      error: next","    })","","    db.meetings.getAll(req.query, wrap(function(nul, meets) {","      meets.forEach(augmentMeeting)","      res.send(meets)","      return next()","    }))","  }","","  handler.loadMeeting = function(req, res, next) {","    var wrap = noevil({","      error: next","    })","","    db.meetings.get(req.params.idMeeting, wrap(function(nul, meet) {","      if (meet) {","        req.params.meet = meet","        return next()","      } else {","        res.send(new restify.ResourceNotFoundError('L\\'identifiant de s&#195;&#169;ance demand&#195;&#169; n\\'existe pas.'))","      }","    }))","  }","","  handler.getMeeting = function(req, res, next) {","    augmentMeeting(req.params.meet)","    res.send(req.params.meet)","    return next()","  }","","  handler.getMeetingInterventions = function(req, res, next) {","    var wrap = noevil({","      error: next","    })","","    util.extend(req.query, {meeting: req.params.idMeeting})","    db.interventions.getAll(req.query, wrap(function(nul, ints) {","      ints.forEach(common.augmentIntervention)","      res.send(ints)","      return next()","    }))","  }","","  handler.getMeetingIntervention = function(req, res, next) {","    var wrap = noevil({","      error: next","    })","","    db.interventions.get(req.params.idInt, wrap(function(nul, intr) {","      if (intr &amp;&amp; intr.meetingId === req.params.idMeeting) {","        common.augmentIntervention(intr)","        res.send(intr)","      } else {","        if (intr) {","          res.send(new restify.ResourceNotFoundError('L\\'identifiant d\\'intervention demand&#195;&#169; n\\'existe pas pour la s&#195;&#169;ance sp&#195;&#169;cifi&#195;&#169;e.'))","        } else {","          res.send(new restify.ResourceNotFoundError('L\\'identifiant d\\'intervention demand&#195;&#169; n\\'existe pas.'))","        }","      }","      return next()","    }))","  }","","  return handler","}"];
