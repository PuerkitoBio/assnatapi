/* automatically generated by JSCoverage - do not edit */
if (typeof _$jscoverage === 'undefined') _$jscoverage = {};
if (! _$jscoverage['handler/deputies.js']) {
  _$jscoverage['handler/deputies.js'] = [];
  _$jscoverage['handler/deputies.js'][1] = 0;
  _$jscoverage['handler/deputies.js'][5] = 0;
  _$jscoverage['handler/deputies.js'][6] = 0;
  _$jscoverage['handler/deputies.js'][25] = 0;
  _$jscoverage['handler/deputies.js'][27] = 0;
  _$jscoverage['handler/deputies.js'][30] = 0;
  _$jscoverage['handler/deputies.js'][31] = 0;
  _$jscoverage['handler/deputies.js'][35] = 0;
  _$jscoverage['handler/deputies.js'][36] = 0;
  _$jscoverage['handler/deputies.js'][37] = 0;
  _$jscoverage['handler/deputies.js'][38] = 0;
  _$jscoverage['handler/deputies.js'][42] = 0;
  _$jscoverage['handler/deputies.js'][43] = 0;
  _$jscoverage['handler/deputies.js'][47] = 0;
  _$jscoverage['handler/deputies.js'][48] = 0;
  _$jscoverage['handler/deputies.js'][49] = 0;
  _$jscoverage['handler/deputies.js'][50] = 0;
  _$jscoverage['handler/deputies.js'][52] = 0;
  _$jscoverage['handler/deputies.js'][57] = 0;
  _$jscoverage['handler/deputies.js'][58] = 0;
  _$jscoverage['handler/deputies.js'][59] = 0;
  _$jscoverage['handler/deputies.js'][60] = 0;
  _$jscoverage['handler/deputies.js'][63] = 0;
  _$jscoverage['handler/deputies.js'][64] = 0;
  _$jscoverage['handler/deputies.js'][68] = 0;
  _$jscoverage['handler/deputies.js'][70] = 0;
  _$jscoverage['handler/deputies.js'][71] = 0;
  _$jscoverage['handler/deputies.js'][72] = 0;
  _$jscoverage['handler/deputies.js'][73] = 0;
  _$jscoverage['handler/deputies.js'][77] = 0;
  _$jscoverage['handler/deputies.js'][78] = 0;
  _$jscoverage['handler/deputies.js'][82] = 0;
  _$jscoverage['handler/deputies.js'][83] = 0;
  _$jscoverage['handler/deputies.js'][84] = 0;
  _$jscoverage['handler/deputies.js'][85] = 0;
  _$jscoverage['handler/deputies.js'][87] = 0;
  _$jscoverage['handler/deputies.js'][88] = 0;
  _$jscoverage['handler/deputies.js'][90] = 0;
  _$jscoverage['handler/deputies.js'][93] = 0;
  _$jscoverage['handler/deputies.js'][97] = 0;
}
_$jscoverage['handler/deputies.js'][1]++;
var noevil = require("see-no-evil"), restify = require("restify"), util = require("../util");
_$jscoverage['handler/deputies.js'][5]++;
module.exports = (function (db) {
  _$jscoverage['handler/deputies.js'][6]++;
  var handler = {}, common = require("./common");
  _$jscoverage['handler/deputies.js'][25]++;
  function augmentDeputy(dep) {
    _$jscoverage['handler/deputies.js'][27]++;
    dep.interventionsPath = "/deputies/" + dep.id + "/interventions";
}
  _$jscoverage['handler/deputies.js'][30]++;
  handler.getDeputies = (function (req, res, next) {
  _$jscoverage['handler/deputies.js'][31]++;
  var wrap = noevil({error: next});
  _$jscoverage['handler/deputies.js'][35]++;
  db.deputies.getAll(req.query, wrap((function (nul, deps) {
  _$jscoverage['handler/deputies.js'][36]++;
  deps.forEach(augmentDeputy);
  _$jscoverage['handler/deputies.js'][37]++;
  res.send(deps);
  _$jscoverage['handler/deputies.js'][38]++;
  return next();
})));
});
  _$jscoverage['handler/deputies.js'][42]++;
  handler.loadDeputy = (function (req, res, next) {
  _$jscoverage['handler/deputies.js'][43]++;
  var wrap = noevil({error: next});
  _$jscoverage['handler/deputies.js'][47]++;
  db.deputies.get(req.params.idDep, wrap((function (nul, dep) {
  _$jscoverage['handler/deputies.js'][48]++;
  if (dep) {
    _$jscoverage['handler/deputies.js'][49]++;
    req.params.dep = dep;
    _$jscoverage['handler/deputies.js'][50]++;
    return next();
  }
  else {
    _$jscoverage['handler/deputies.js'][52]++;
    res.send(new restify.ResourceNotFoundError("L'identifiant de d\u00c3\u00a9put\u00c3\u00a9 demand\u00c3\u00a9 n'existe pas."));
  }
})));
});
  _$jscoverage['handler/deputies.js'][57]++;
  handler.getDeputy = (function (req, res, next) {
  _$jscoverage['handler/deputies.js'][58]++;
  augmentDeputy(req.params.dep);
  _$jscoverage['handler/deputies.js'][59]++;
  res.send(req.params.dep);
  _$jscoverage['handler/deputies.js'][60]++;
  return next();
});
  _$jscoverage['handler/deputies.js'][63]++;
  handler.getDeputyInterventions = (function (req, res, next) {
  _$jscoverage['handler/deputies.js'][64]++;
  var wrap = noevil({error: next});
  _$jscoverage['handler/deputies.js'][68]++;
  util.extend(req.query, {deputy: req.params.idDep});
  _$jscoverage['handler/deputies.js'][70]++;
  db.interventions.getAll(req.query, wrap((function (nul, ints) {
  _$jscoverage['handler/deputies.js'][71]++;
  ints.forEach(common.augmentIntervention);
  _$jscoverage['handler/deputies.js'][72]++;
  res.send(ints);
  _$jscoverage['handler/deputies.js'][73]++;
  return next();
})));
});
  _$jscoverage['handler/deputies.js'][77]++;
  handler.getDeputyIntervention = (function (req, res, next) {
  _$jscoverage['handler/deputies.js'][78]++;
  var wrap = noevil({error: next});
  _$jscoverage['handler/deputies.js'][82]++;
  db.interventions.get(req.params.idInt, wrap((function (nul, intr) {
  _$jscoverage['handler/deputies.js'][83]++;
  if (intr && intr.deputyId === req.params.idDep) {
    _$jscoverage['handler/deputies.js'][84]++;
    common.augmentIntervention(intr);
    _$jscoverage['handler/deputies.js'][85]++;
    res.send(intr);
  }
  else {
    _$jscoverage['handler/deputies.js'][87]++;
    if (intr) {
      _$jscoverage['handler/deputies.js'][88]++;
      res.send(new restify.ResourceNotFoundError("L'identifiant d'intervention demand\u00c3\u00a9 n'existe pas pour le d\u00c3\u00a9put\u00c3\u00a9 sp\u00c3\u00a9cifi\u00c3\u00a9."));
    }
    else {
      _$jscoverage['handler/deputies.js'][90]++;
      res.send(new restify.ResourceNotFoundError("L'identifiant d'intervention demand\u00c3\u00a9 n'existe pas."));
    }
  }
  _$jscoverage['handler/deputies.js'][93]++;
  return next();
})));
});
  _$jscoverage['handler/deputies.js'][97]++;
  return handler;
});
_$jscoverage['handler/deputies.js'].source = ["var noevil = require('see-no-evil'),","  restify = require('restify'),","  util = require('../util')","","module.exports = function(db) {","  var handler = {},","    common = require('./common')","","  /*","  ** Deputy object:","  ** - url : the absolute URL to the deputy's page on assnat","  ** - id : the unique identifier of the deputy (currently, the name_id part of the URL)","  ** - lastName : the deputy's last name","  ** - firstName : the deputy's first name","  ** - email : the publicly displayed email address of the deputy [optional]","  ** - district : the district of the deputy","  ** - party : the name of the party of the deputy (Ind&#195;&#169;pendant if none)","  ** - title : M. or Mme","  ** - gender : m[ale] or f[emale]","  ** - picture : for now, the absolute url of the small picture on assnat","  ** - isActive : whether or not this deputy is currently active","  ** - interventionsPath : the path of this deputy's interventions","  */","","  function augmentDeputy(dep) {","    // Add the URL to his/her interventions","    dep.interventionsPath = '/deputies/' + dep.id + '/interventions'","  }","","  handler.getDeputies = function(req, res, next){","    var wrap = noevil({","      error: next","    })","","    db.deputies.getAll(req.query, wrap(function(nul, deps) {","      deps.forEach(augmentDeputy)","      res.send(deps)","      return next()","    }))","  }","","  handler.loadDeputy = function(req, res, next) {","    var wrap = noevil({","      error: next","    })","","    db.deputies.get(req.params.idDep, wrap(function(nul, dep) {","      if (dep) {","        req.params.dep = dep","        return next()","      } else {","        res.send(new restify.ResourceNotFoundError('L\\'identifiant de d&#195;&#169;put&#195;&#169; demand&#195;&#169; n\\'existe pas.'))","      }","    }))","  }","","  handler.getDeputy = function(req, res, next) {","    augmentDeputy(req.params.dep)","    res.send(req.params.dep)","    return next()","  }","","  handler.getDeputyInterventions = function(req, res, next) {","    var wrap = noevil({","      error: next","    })","","    util.extend(req.query, {deputy: req.params.idDep})","","    db.interventions.getAll(req.query, wrap(function(nul, ints) {","      ints.forEach(common.augmentIntervention)","      res.send(ints)","      return next()","    }))","  }","","  handler.getDeputyIntervention = function(req, res, next) {","    var wrap = noevil({","      error: next","    })","","    db.interventions.get(req.params.idInt, wrap(function(nul, intr) {","      if (intr &amp;&amp; intr.deputyId === req.params.idDep) {","        common.augmentIntervention(intr)","        res.send(intr)","      } else {","        if (intr) {","          res.send(new restify.ResourceNotFoundError('L\\'identifiant d\\'intervention demand&#195;&#169; n\\'existe pas pour le d&#195;&#169;put&#195;&#169; sp&#195;&#169;cifi&#195;&#169;.'))","        } else {","          res.send(new restify.ResourceNotFoundError('L\\'identifiant d\\'intervention demand&#195;&#169; n\\'existe pas.'))","        }","      }","      return next()","    }))","  }","","  return handler","}"];
