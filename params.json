{"tagline":"Un API pour exploiter les données de l'Assemblée nationale du Québec.","body":"# assnatapi - un API pour l'Assemblée nationale du Québec\r\n\r\n- [Présentation](#a1)\r\n- [Pourquoi?](#a2)\r\n- [Statut de l'API](#a3)\r\n- [Référence et exemples](#a4)\r\n    - [Objet *deputy*](#a5)\r\n    - [Objet *meeting*](#a6)\r\n    - [Objet *intervention*](#a7)\r\n    - [Les routes et les paramètres](#a8)\r\n- [Journal des changements](#a12)\r\n- [Pistes d'évolution](#a9)\r\n- [Détails techniques et style de code](#a10)\r\n- [Licence](#a11)\r\n\r\n<a name=\"a1\" />\r\n## Présentation\r\n\r\nUn [API][] de type [REST][] pour permettre l'exploitation par programmation des données de l'Assemblée nationale du Québec.\r\n\r\nL'API se trouve à l'adresse http://assnatapi.jit.su .\r\n\r\n<a name=\"a2\" />\r\n## Pourquoi?\r\n\r\nLe [site web de l'Assemblée nationale][assnat] contient toutes les transcriptions textuelles des débats et des travaux des différentes commissions au parlement. Le tout est cependant dans un format HTML pratique pour un humain mais moins pour une machine. Des applications - mobiles ou non - et sites web pourraient être développés pour mieux présenter ces données et offrir différents services aux citoyen(nes) et professionnel(le)s de l'information. Cependant, en l'absence d'un format convivial à la programmation, c'est une tâche peu triviale.\r\n\r\nCet API (*interface de programmation d'application*), qui repose sur les données publiques, extraites du site officiel de l'Assemblée nationale du Québec et structurées en une base de données documentaire [MongoDB][mongo], vise à combler cette lacune par rapport aux données ouvertes (*open data*) - à tout le moins du point de vue exploitation, l'aspect conditions d'utilisation étant hors de notre contrôle - dans cette institution au coeur de notre démocratie.\r\n\r\nCe [référentiel GitHub][githubrepo] contient le code du serveur web répondant aux requêtes pour l'API seulement. Le code du programme qui extrait les données du site de l'Assemblée et les sauvegarde de façon structurée dans la base de données n'est pas encore déposé publiquement. Il le sera éventuellement, quand j'aurai terminé l'automatisation complète des tâches.\r\n\r\nVous pouvez supporter le développement du projet par un don sur la [page d'accueil du site][don].\r\n\r\n<a name=\"a3\" />\r\n## Statut de l'API\r\n\r\nLa version actuelle - `0.1.x` - devrait être considérée comme une **version alpha**. L'idée est de la rendre disponible, tâter l'intérêt pour l'API, recevoir les commentaires et suggestions, les problèmes rencontrés, et la faire évoluer à partir de cette rétroaction. La page [GitHub issues][issues] du projet devrait être utilisée pour ces communications. À l'inverse, je publierai les évolutions du projet sur [mon fil Twitter][twitter], sous le *hashtag* [#assnatapi][hash]. La période de pause parlementaire estivale permet l'expérimentation de l'API en toute quiétude afin de préparer le tout pour une version stable à la rentrée.\r\n\r\nTout peut donc être appelé à changer en cette jeune version, les URL, les noms des champs, etc. Et pour le moment, seuls les travaux du mois de juin 2012 de la 39ème législature, 2ème session sont offerts par l'API. D'autres seront ajoutés sous peu.\r\n\r\n<a name=\"a4\" />\r\n## Référence et exemples\r\n\r\nTrois types de documents peuvent être retournés par l'API. Les champs sont en anglais pour de simples questions pratiques, les accents et les mots français se prêtant moins bien à une nomenclature pour un langage de programmation, et mélanger les mots clefs des langages (en anglais, tels que `for`, `if`, etc.) avec des noms de variables ou de propriétés en français n'est pas naturel à la lecture du code.\r\n\r\n<a name=\"a5\" />\r\n### **deputy**: un document représentant un député à l'Assemblée nationale.\r\n\r\nCe document peut contenir les champs suivants:\r\n\r\n*    **id** : l'identifiant unique du député\r\n*    **url** : l'URL absolue vers la page du député sur le site de l'Assemblée nationale\r\n*    **lastName** : le nom de famille du député\r\n*    **firstName** : le prénom du député\r\n*    **email** : le courriel du député (facultatif)\r\n*    **district** : la circonscription actuelle (ou la plus récente) du député\r\n*    **party** : le parti politique actuel (ou le plus récent) du député (`'ind.'` si indépendant)\r\n*    **title** : `'M.'` ou `'Mme'`\r\n*    **gender** : le sexe du député, soit `'m'` ou `'f'`\r\n*    **picture** : l'URL absolue vers la photo du député sur le site de l'Assemblée nationale. Ne devrait **pas** être utilisée telle quelle pour afficher la photo, celle-ci devrait être sauvegardée sur votre site web au besoin. (facultatif)\r\n*    **isActive** : indique si le député est actuellement en fonction\r\n*    **interventionsPath** : le chemin d'accès au document des interventions de ce député\r\n\r\n<a name=\"a6\" />\r\n### **meeting**: un document représentant une séance de travail à l'Assemblée nationale.\r\n\r\nCe document peut contenir les champs suivants:\r\n\r\n*    **id** : l'identifiant unique de la séance (dans le format `volume.numéro`, ex.: `42.122`)\r\n*    **status** : statut du contenu de la journée (le contenu est rapidement mis sur le site de l'Assemblée en version \"préliminaire\", puis est mis à jour plus tard en version \"finale\")\r\n*    **session** : la session parlementaire dans laquelle à eu lieu cette séance (dans le format `législature.session`, ex.: `39.2`)\r\n*    **day** : le jour de la semaine de la séance, en français (ex.: `vendredi`)\r\n*    **date** : la date de la séance, en format ISO (ex.: `2012-06-12T04:00:00.000Z`)\r\n*    **interventionsPath** : le chemin d'accès au document des interventions de cette séance\r\n\r\n<a name=\"a7\" />\r\n### **intervention**: un document représentant une intervention lors d'une séance.\r\n\r\nIl peut s'agir d'une intervention d'un député, ou d'un officiel de l'assemblée (président, vice-président, etc.). Bien que l'officiel soit un député élu, comme il ne s'exprime pas en tant que député lorsqu'il remplit un tel rôle, l'intervention n'est pas rattachée à ce député. Idem pour les interventions anonymes (\"Des voix\" ou \"Une voix\", par exemple). Ce document peut contenir les champs suivants:\r\n\r\n*    **id** : l'identifiant unique de l'intervention\r\n*    **subject** : le sujet en cours lors de cette intervention (facultatif)\r\n*    **subtitle** : le sous-titre du sujet en cours lors de cette intervention (facultatif)\r\n*    **speaker** : le libellé de l'intervenant tel qu'écrit dans le journal de l'Assemblée\r\n*    **time** : l'heure approximative de l'intervention, à 10 minutes près\r\n*    **text** : la transcription textuelle de l'intervention. À noter que les sauts de ligne sont représentés par `\\n`\r\n*    **deputyId** : l'identifiant du député ayant fait l'intervention (facultatif)\r\n*    **meetingId** : l'identifiant de la séance à laquelle appartient l'intervention\r\n*    **district** : la circonscription du député ayant fait l'intervention, au moment de celle-ci. Peut différer de `district` du député si celui-ci a changé de circonscription depuis (facultatif)\r\n*    **party** : le parti politique auquel appartenait le député ayant fait l'intervention au moment de celle-ci. Peut différer de `party` du député si celui-ci a changé de parti depuis (facultatif)\r\n*    **prevId** : l'identifiant de l'intervention précédant celle-ci (facultatif)\r\n*    **nextId** : l'identifiant de l'intervention suivant celle-ci (facultatif)\r\n*    **deputyPath** : le chemin d'accès au document du député ayant fait cette intervention (facultatif)\r\n*    **meetingPath** : le chemin d'accès au document de la séance à laquelle appartient cette intervention\r\n*    **prevInterventionPath** : le chemin d'accès à l'intervention précédant celle-ci (facultatif)\r\n*    **nextInterventionPath** : le chemin d'accès à l'intervention suivant celle-ci (facultatif)\r\n\r\n<a name=\"a8\" />\r\n### Les routes et les paramètres\r\n\r\nComme l'API ne permet que de la consultation, la seule méthode HTTP permise pour chaque route est un `'GET'`. Tous les résultats sont sous le format [JSON][]. Chaque route qui retourne un `Array` peut supporter un ou plusieurs filtres (critères de recherche), de même qu'un tri, une limite d'enregistrements retournés, et un nombre d'enregistrements à sauter. Plus d'informations sur le tri, la limite et le saut dans un instant. Les filtres, le tri, la limite et le saut sont spécifiés par chaîne d'interrogation (*query string*, soit la portion de l'URL qui suit un `'?'`) et sont séparés les uns des autres par le caractère `'&'`.\r\n\r\nUn outil comme [curl][] peut être utilisé pour tester l'API et vérifier les résultats retournés, mais comme il ne s'agit que de `'GET'`, il est aussi possible de faire les appels directement depuis le fureteur Web, via la barre d'adresse.\r\n\r\n*    **/deputies** : retourne un `Array` contenant l'ensemble des députés. [Exemple][depex].\r\n    \r\n    **Filtres**:\r\n    \r\n    *    *active* (ou simplement *a*) ou *inactive* (ou simplement *i*). Une valeur booléenne qui peut être `true` ou `1` pour \"vrai\", toute autre valeur étant fausse.\r\n    *    *party*, un nom exact de parti (casse significative) ou une portion de nom de parti lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n    *    *district*, un nom exact de circonscription (casse significative) ou une portion de nom de circonscription lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative). [Exemple][depex15].\r\n\r\n*    **/deputies/:idDep** : retourne le député correspondant à l'identifiant `:idDep`, ou un code 404 si l'identifiant n'existe pas. [Exemple][depex2].\r\n    \r\n    **Filtres**: aucun.\r\n\r\n*    **/deputies/:idDep/interventions** : retourne un `Array` contenant l'ensemble des interventions du député identifié par `:idDep`. [Exemple][depex3].\r\n\r\n    **Filtres**:\r\n\r\n    *    *meeting* qui indique l'identifiant de séance pour lequel on veut les interventions. Les autres interventions ne seront pas retournées. [Exemple][depex4].\r\n    *    *party*, un nom exact de parti (casse significative) ou une portion de nom de parti lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n    *    *district*, un nom exact de circonscription (casse significative) ou une portion de nom de circonscription lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n    *    *subject*, un sujet exact (casse significative) ou une portion de sujet lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n\r\n*    **/deputies/:idDep/interventions/:idInt** : retourne l'intervention correspondant à l'identifiant `:idInt`, ou un code 404 si l'identifiant n'existe pas ou s'il n'est pas associé au député identifié par `:idDep`. [Exemple][depex5].\r\n\r\n    **Filtres**: aucun.\r\n\r\n*    **/meetings** : retourne un `Array` contenant l'ensemble des séances. [Exemple][depex6].\r\n    \r\n    **Filtres**:\r\n\r\n    *    *session* qui indique l'identifiant de la session pour lequel on veut les séances (sous le format `législature.session`). [Exemple][depex7].\r\n\r\n*    **/meetings/:idMeeting** : retourne la séance correspondant à l'identifiant `:idMeeting`, ou un code 404 si l'identifiant n'existe pas. [Exemple][depex8].\r\n\r\n    **Filtres**: aucun.\r\n\r\n*    **/meetings/:idMeeting/interventions** : retourne un `Array` contenant l'ensemble des interventions de la séance identifiée par `:idMeeting`. [Exemple][depex9].\r\n\r\n    **Filtres**:\r\n\r\n    *    *deputy* qui indique l'identifiant du député pour lequel on veut les interventions. Les autres interventions ne seront pas retournées. [Exemple][depex10].\r\n    *    *party*, un nom exact de parti (casse significative) ou une portion de nom de parti lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n    *    *district*, un nom exact de circonscription (casse significative) ou une portion de nom de circonscription lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n    *    *subject*, un sujet exact (casse significative) ou une portion de sujet lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n\r\n*    **/meetings/:idMeeting/interventions/:idInt** : retourne l'intervention correspondant à l'identifiant `:idInt`, ou un code 404 si l'identifiant n'existe pas ou s'il n'est pas associé à la séance identifiée par `:idMeeting`. [Exemple][depex11].\r\n\r\n    **Filtres**: aucun.\r\n\r\n*    **/interventions** : retourne un `Array` contenant l'ensemble des interventions. [Exemple][depex12].\r\n\r\n    **Filtres**: \r\n\r\n    *    *meeting* qui indique l'identifiant de la séance pour lequel on veut les interventions.\r\n    *    *deputy* qui indique l'identifiant du député pour lequel on veut les interventions. [Exemple][depex13].\r\n    *    *party*, un nom exact de parti (casse significative) ou une portion de nom de parti lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n    *    *district*, un nom exact de circonscription (casse significative) ou une portion de nom de circonscription lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n    *    *subject*, un sujet exact (casse significative) ou une portion de sujet lorsque préfixé et/ou suffixé d'un astérisque `'*'` (casse non significative).\r\n\r\n*    **/interventions/:idInt** : retourne l'intervention correspondant à l'identifiant `:idInt`, ou un code 404 si l'identifiant n'existe pas. [Exemple][depex14].\r\n\r\n    **Filtres**: aucun.\r\n\r\nTel que promis, un mot sur le tri, la limite et le saut, qui peuvent s'appliquer à toutes les routes retournant un ensemble d'enregistrements (un `Array`). En gras, le nom de la clef à utiliser dans la chaîne d'interrogation (*query string*):\r\n\r\n*    **sort** : Une liste de champs sur lesquels le résultat sera trié, séparés par une virgule. Pour un tri sur un champ en ordre descendant, mettre un signe négatif (`'-'`) devant le nom du champ. Se référer à la <a href=\"#a5\">documentation sur les types d'objets</a> pour voir le nom des champs.\r\n*    **limit** : Un nombre positif indiquant le nombre limite d'enregistrements à retourner. À noter qu'une limite est *toujours* utilisée, même si elle n'est pas spécifiée. La valeur par défaut est également la valeur maximale, soit **1000**.\r\n*    **skip** : Un nombre positif indiquant le nombre d'enregistrements à sauter avant de commencer à retourner les enregistrements corresponant aux critères demandés. Utile pour implémenter un principe de pagination. Par défaut, aucun saut n'est effectué (équivalent de `0`).\r\n\r\n<a name=\"a12\" />\r\n## Journal des changements (*changelog*)\r\n\r\n*    **v0.1.x**: développement initial.\r\n\r\n<a name=\"a9\" />\r\n## Pistes d'évolution\r\n\r\nRien de coulé dans le béton pour le moment, mais ces points sont déjà investigués et devraient être des ajouts réalistes dans une future version:\r\n\r\n*    **votes**: offrir un type de document indiquant, pour chaque vote nominal, quel(le) député(e) a voté pour, contre ou s'est abstenu.\r\n*    **travaux des commissions**: pour l'instant, seuls les journaux des assemblées sont extraits et exposés par l'API. Les journaux des commissions parlementaires sont disponibles sur le site de l'Assemblée et devraient pouvoir être offerts par l'API.\r\n*    **ajout des sessions précédentes**: tel que mentionné précédemment, seules les données de juin 2012 de la session en cours sont offertes en ce moment. D'autres s'ajouteront bientôt, en reculant des plus récentes aux plus anciennes.\r\n*    **amélioration des sujets**: la gestion actuelle des `subject` et `subtitle` comporte quelques problèmes. J'aimerais améliorer le tout dans une future version.\r\n\r\n<a name=\"a10\" />\r\n## Détails techniques et style de code\r\n\r\nLe serveur web utilise les technologies suivantes, toutes en logiciel libre à moins d'indication contraire:\r\n\r\n*    [node.js][node] et son gestionnaire de librairies [npm][]\r\n*    les librairies [restify][], [node-static][static], [mongodb][nodemongo], et [see-no-evil][]\r\n*    les librairies [mocha][], [expect.js][expect], [jscoverage][], [request][] et [sinon.js][sinon] pour les tests\r\n*    la base de données [MongoDB][mongo] et le service dans les nuages [MongoHQ][mongohq] (ce dernier est un service privé)\r\n*    l'infrastructure dans les nuages [Nodejitsu][jitsu]\r\n\r\nPour le style du code, j'en parle puisque ça a généré une [mini-controverse][semicolon] dans le monde javascript et c'est important à savoir si vous souhaitez collaborer au projet, [je n'utilise pas de point-virgule dans mon code][isaac], laissant l'ASI (*automatic semicolon insertion*) faire son travail, et j'utilise [JSHint][] pour valider la qualité du code, qui est plus flexible que [JSLint][] de Crockford (il permet entre autre l'écriture sans `';'`). À noter par contre que je n'utilise pas le style [virgule en début de ligne][npmstyle] popularisé surtout par Isaac Schlueter sur npm.\r\n\r\n<a name=\"a11\" />\r\n## Licence\r\n\r\nLe code source est offert sous la licence de logiciel MIT. Les données de l'Assemblée nationale, cependant, demeurent probablement limitées par les [conditions d'utilisation originales de l'Assemblée][conditions].\r\n\r\n[githubrepo]: https://github.com/PuerkitoBio/assnatapi\r\n[assnat]: http://www.assnat.qc.ca/fr/index.html\r\n[issues]: https://github.com/PuerkitoBio/assnatapi/issues\r\n[node]: http://nodejs.org/\r\n[npm]: http://npmjs.org/\r\n[restify]: http://mcavage.github.com/node-restify/\r\n[nodemongo]: https://github.com/mongodb/node-mongodb-native\r\n[see-no-evil]: https://github.com/PuerkitoBio/see-no-evil\r\n[mocha]: http://visionmedia.github.com/mocha/\r\n[expect]: https://github.com/LearnBoost/expect.js\r\n[jscoverage]: https://github.com/visionmedia/node-jscoverage\r\n[request]: https://github.com/mikeal/request\r\n[sinon]: http://sinonjs.org/\r\n[mongo]: http://www.mongodb.org/\r\n[mongohq]: https://mongohq.com\r\n[jitsu]: http://www.nodejitsu.com/\r\n[semicolon]: http://news.ycombinator.com/item?id=3842713\r\n[isaac]: http://blog.izs.me/post/2353458699/an-open-letter-to-javascript-leaders-regarding\r\n[jshint]: http://www.jshint.com/\r\n[jslint]: http://www.jslint.com/\r\n[npmstyle]: http://npmjs.org/doc/coding-style.html\r\n[api]: http://en.wikipedia.org/wiki/Application_programming_interface\r\n[rest]: http://en.wikipedia.org/wiki/Restful\r\n[twitter]: https://twitter.com/PuerkitoBio\r\n[json]: http://en.wikipedia.org/wiki/JSON\r\n[don]: http://assnatapi.jit.su\r\n[static]: https://github.com/cloudhead/node-static\r\n[curl]: http://curl.haxx.se/\r\n[hash]: https://twitter.com/#!/search/realtime/%23assnatapi\r\n[conditions]: http://www.assnat.qc.ca/fr/propos-site/droits-propriete-intellectuelle.html\r\n[depex]: http://assnatapi.jit.su/deputies\r\n[depex2]: http://assnatapi.jit.su/deputies/charest-jean-525\r\n[depex3]: http://assnatapi.jit.su/deputies/charest-jean-525/interventions\r\n[depex4]: http://assnatapi.jit.su/deputies/charest-jean-525/interventions?meeting=42.122\r\n[depex5]: http://assnatapi.jit.su/deputies/charest-jean-525/interventions/42.122.52\r\n[depex6]: http://assnatapi.jit.su/meetings\r\n[depex7]: http://assnatapi.jit.su/meetings?session=39.2\r\n[depex8]: http://assnatapi.jit.su/meetings/42.123\r\n[depex9]: http://assnatapi.jit.su/meetings/42.123/interventions\r\n[depex10]: http://assnatapi.jit.su/meetings/42.123/interventions?deputy=blais-marguerite-1263\r\n[depex11]: http://assnatapi.jit.su/meetings/42.123/interventions/42.123.1\r\n[depex12]: http://assnatapi.jit.su/interventions\r\n[depex13]: http://assnatapi.jit.su/interventions?meeting=42.117&deputy=charest-jean-525\r\n[depex14]: http://assnatapi.jit.su/interventions/42.122.52\r\n[depex15]: http://assnatapi.jit.su/deputies?party=Parti%20libéral%20du%20Québec&district=*jean*\r\n","google":"UA-32794597-1","note":"Don't delete this file! It's used internally to help with page regeneration.","name":"assnatapi"}